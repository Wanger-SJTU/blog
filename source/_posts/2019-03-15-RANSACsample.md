---
layout: post
title:  RANSAC 随机采样一致
date:   Fri Mar 15 2019
author: wanger
header-img: 
tags: 
  - math
---

RANSAC 是根据一组包含异常数据的样本数据集，通过迭代的方法计算出数据的数学模型参数，得到有效样本数据的非确定性的算法。

## 介绍

算法假设

> - 样本中包含正确数据(inliers，符合模型的数据)和异常数据(Outliers，不符合模型的数据)，即数据集中含有噪声。
> - 给定一组正确的数据，存在可以计算出符合这些数据的模型参数的方法。

![image](https://tuchuang-1259359185.cos.ap-chengdu.myqcloud.com/_asserts/RANSACsample/1.jpg)


给定一组观测数据（往往含有较大的噪声或无效点），一个用于解释观测数据的参数化模型以及一些可信的参数。RANSAC通过反复选择数据中的一组随机子集来达成目标。被选取的子集被假设为局内点，并用下述方法进行验证：
1. 有一个模型适应于假设的局内点，即所有的未知参数都能从假设的局内点计算得出。
2. 用1中得到的模型去测试所有的其它数据，如果某个点适用于估计的模型，认为它也是局内点。
3. 如果有足够多的点被归类为假设的局内点，那么估计的模型就足够合理。
4. 用所有假设的局内点去重新估计模型（如使用最小二乘法），因为它仅仅被初始的假设局内点估计过。
5. 通过估计局内点与模型的错误率来评估模型。



>在数据中随机选择几个点设定为内群
计算拟合内群的模型
把其它刚才没选到的点带入刚才建立的模型中，计算是否为内群
记下内群数量
重复以上步骤多做几次
比较哪次计算中内群数量最多，内群最多的那次所建的模型就是我们所要求的解

这里有几个问题
- 一开始的时候我们要随机选择多少点（n）
- 以及要重复做多少次（k）

**参数决定**
假设每个点是真正内群的机率是 $w$
  >$w$ = 真正內群的数目 / 数据总量

通常我们不知道$w$是多少, $w^n$是所选择的$n$个点都是内群的机率, $1-w^n$ 是所选择的 $n$ 个点至少有一个不是内群的机率, $(1 − w^n)^k$ 是表示重复 $k$ 次都没有全部的 $n$ 个点都是内群的机率, 这边定算法跑k次以后成功的机率是 $p$，那么,

$$
   1 − p =(1 − w^n)^k \\
   p = 1 −(1 − w^n)^k
$$

所以如果希望成功机率高，$p = 0.99$, 当$n$不变时，$k$越大,$p$越大, 当$w$不变时，$n$越大，所需的$k$就越大, 通常$w$未知，所以$n$选小一点比较好。

![image](https://tuchuang-1259359185.cos.ap-chengdu.myqcloud.com/_asserts/RANSACsample/2.jpg)

## 应用
图片拼接

[RANSAC for Dummies](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.475.1243&rep=rep1&type=pdf)